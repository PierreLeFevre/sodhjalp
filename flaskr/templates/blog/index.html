{% extends 'base.html' %}

{% block title %}Inlägg{% endblock %}
{% block content %}



  <div class="card mb-5 rounded bg-transparent border-0">
    <div class="card-body pt-0">
        {% if g.user %}
          <a class="text-primary" href="{{ url_for('blog.create') }}">
          <div class="card shadow shadow-hover border border-primary"><div class="card-body">
            <i class="fas fa-plus"></i>&nbsp;&nbsp;
            Skapa nytt inlägg
          </div></div></a>
        {% else %}
          <a class="text-primary" href="/auth/register">
          <div class="card shadow shadow-hover border border-primary"><div class="card-body">
            <i class="fas fa-user-plus"></i>&nbsp;&nbsp;Skapa ett konto nu för att skapa och kommentera på inlägg!
          </div></div></a>
        {% endif %}

        
        {% for post in posts if posts != None %}
          <div class="card mt-4 shadow-hover shadow rounded border-0" id="post_{{post['id']}}">

            <div class="card-header {% if g.user['dark_mode'] %}bg-transparent{% else %}bg-white{% endif %} border-0 rounded">
              <h3 class="card-title">{{ post['title'] }}</h3>
              <div>
                {% if get_user(post['author_id'])['is_teacher'] %}
                  <p class="lead card-subtitle text-muted">
                    <span class="badge badge-success text-capitalize"><i class="fas fa-user"></i>&nbsp;&nbsp;{{ post['username'] }}</span>
                    <span class="badge badge-primary text-capitalize"><i class="fas fa-calendar-alt"></i>&nbsp;&nbsp;{{ post['created'].strftime('%d/%m %Y') }}</span>
                    <span class="badge badge-primary text-capitalize"><i class="fas fa-chalkboard"></i>&nbsp;&nbsp;{{ post['topic']}}</span>
                  </p>
                {% else %}
                  <p class="lead card-subtitle text-muted">
                    <span class="badge badge-primary text-capitalize"><i class="fas fa-user"></i>&nbsp;&nbsp;{{ post['username'] }}</span>
                    <span class="badge badge-primary text-capitalize"><i class="fas fa-calendar-alt"></i>&nbsp;&nbsp;{{ post['created'].strftime('%d/%m %Y') }}</span>
                    <span class="badge badge-primary text-capitalize"><i class="fas fa-chalkboard"></i>&nbsp;&nbsp;{{ post['topic']}}</span>
                  </p>
                {% endif %}
              </div>
            </div>

            <div class="card-body pl-4 pr-4 pb-4">
              <p style="white-space: pre-line">{{post['body']}}</p>
              <a href="{{ url_for('blog.show_post', id=post['id']) }}" class="stretched-link text-primary">Se inlägg</a>
            </div>

          </div>
        {% endfor %}
        

    </div>
  </div>




{% endblock %}